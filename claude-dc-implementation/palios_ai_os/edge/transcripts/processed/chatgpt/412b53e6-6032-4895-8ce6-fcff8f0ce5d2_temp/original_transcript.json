{
  "data_id": "412b53e6-6032-4895-8ce6-fcff8f0ce5d2",
  "content": [
    "### **\ud83d\ude80 Step 89: Securely Connecting Notion API & Automating Data Transfer**\n\u2705 **You have completed Steps 1-3 (Notion API integration & database sharing).**  \n\u274c **You need to securely pass the Notion API key without exposing it in chat.**  \n\n\ud83d\ude80 **Best Option: Use a Local Python Script to Execute the Transfer Securely.**  \n\n---\n\n## **\ud83d\ude80 Step 89.1: Setting Up Secure API Key Handling**\nSince **you should not paste your API key here**, we will use a **local script** that securely reads the API key from an environment file.\n\n### **1\ufe0f\u20e3 Create a Secure `.env` File on Your Machine**\n1. Open **Notepad**.\n2. Copy and paste the following:\n   ```\n   NOTION_API_KEY=your-api-key-here\n   ```\n3. Save the file as **`.env`** (make sure it is not `.txt`).\n4. Store it in the **same directory** where we will run the script.\n\n\ud83d\udc49 **Now, your API key is stored securely and will not be exposed.**\n\n---\n\n## **\ud83d\ude80 Step 89.2: Running the Secure Python Script**\nNow, let\u2019s generate and run a Python script that will **fetch your structured data and push it to Notion**.\n\n### **1\ufe0f\u20e3 Create a Python Script (`notion_transfer.py`)**\n- Open **Notepad** (or any code editor).\n- Copy and paste the following:\n  ```python\n  import os\n  import requests\n  from dotenv import load_dotenv\n\n  # Load API key from .env file\n  load_dotenv()\n  NOTION_API_KEY = os.getenv(\"NOTION_API_KEY\")\n\n  # Your database IDs (replace these with the ones you provided earlier)\n  DATABASE_IDS = [\n      \"19b607a1318f80ec832ccc50dbe0c9fc\",\n      \"19a607a1318f80758a8ec473fb68ac59\",\n      \"19a607a1318f8054ad32c34d8648a074\",\n      \"19a607a1318f8070804fd77f1c64a84f\",\n      \"19b607a1318f803a8688fbaa8f8e1d63\",\n      \"19b607a1318f802a9ec1dce8fec6681d\",\n      \"19a607a1318f80429a74f96b9b8305a2\",\n      \"19b607a1318f8027bad4e0b392bb30a5\",\n      \"19a607a1318f803f92e0ddf48de49ad1\",\n      \"19a607a1318f800489ecff40942f39d8\",\n      \"19b607a1318f80898c83dac93266e08e\",\n      \"19b607a1318f80e18595c3dbc970af23\",\n      \"19a607a1318f80b0923be6e918b31862\"\n  ]\n\n  # API headers\n  headers = {\n      \"Authorization\": f\"Bearer {NOTION_API_KEY}\",\n      \"Content-Type\": \"application/json\",\n      \"Notion-Version\": \"2022-06-28\"\n  }\n\n  # Sample data to insert (Modify as needed)\n  data_payload = {\n      \"parent\": {\"database_id\": DATABASE_IDS[0]},  # Modify if necessary\n      \"properties\": {\n          \"Name\": {\"title\": [{\"text\": {\"content\": \"Test Entry\"}}]},\n          \"Category\": {\"select\": {\"name\": \"AI Optimization\"}},\n          \"Priority\": {\"select\": {\"name\": \"High\"}},\n          \"Date Added\": {\"date\": {\"start\": \"2025-03-07\"}}\n      }\n  }\n\n  # Function to insert data into Notion\n  def insert_data_to_notion(database_id, data):\n      url = f\"https://api.notion.com/v1/pages\"\n      data[\"parent\"][\"database_id\"] = database_id\n      response = requests.post(url, headers=headers, json=data)\n      return response.json()\n\n  # Run the data insertion\n  for db_id in DATABASE_IDS:\n      response = insert_data_to_notion(db_id, data_payload)\n      print(f\"Inserted into {db_id}: {response}\")\n\n  print(\"\u2705 Data successfully pushed to Notion!\")\n  ```\n- **Save the file as `notion_transfer.py` in the same directory as `.env`.**\n\n---\n\n## **\ud83d\ude80 Step 89.3: Running the Script**\n### **1\ufe0f\u20e3 Install Required Dependencies**\nBefore running the script, install dependencies:\n```cmd\npip install requests python-dotenv\n```\n\n### **2\ufe0f\u20e3 Run the Script**\n```cmd\npython notion_transfer.py\n```\n\ud83d\udc49 **Expected Output:**\n```\nInserted into 19b607a1318f80ec832ccc50dbe0c9fc: {Notion API Response}\nInserted into 19a607a1318f80758a8ec473fb68ac59: {Notion API Response}\n...\n\u2705 Data successfully pushed to Notion!\n```\n\n### **3\ufe0f\u20e3 Check Notion**\n- Open Notion and **verify that the new data appears in each table**.\n- Confirm that relationships between tables are functioning properly.\n\n---\n\n## **\ud83d\ude80 Next Steps**\n1\ufe0f\u20e3 **Create a secure `.env` file and add your API key (Step 89.1).**  \n2\ufe0f\u20e3 **Create and run the Python script (Step 89.2).**  \n3\ufe0f\u20e3 **Check Notion to confirm that the data is appearing correctly.**  \n\n\ud83d\ude80 **This automates Notion data entry while keeping your API key secure. Let me know once you\u2019ve run the script! \ud83d\udd25**"
  ],
  "source": "chatgpt",
  "timestamp": 1741378386.898196,
  "data_type": "message",
  "metadata": {
    "author": "assistant"
  }
}