{
  "data_id": "724a04de-c76d-4adc-99e2-6c29222a780e",
  "content": [
    "Complete updated main statement. Please confirm this is correct, you've gone in this quite a few times:\n\nif __name__ == \"__main__\":\n    import sys\n\n    if len(sys.argv) < 2:\n        print(\"Usage: python3 edge_processor.py <file_path>\")\n        sys.exit(1)\n\n    file_path = sys.argv[1]\n    \n    if file_path.endswith('.json'):\n        with open(file_path, 'r') as f:\n            data_dict = json.load(f)\n            content_data = data_dict.get('content', '')\n            source = data_dict.get('source', 'unknown')\n\n            # Explicitly handle multiple messages in content\n            if isinstance(content_data, list):\n                # Join all message texts clearly into a single string\n                combined_text = \"\\n\\n\".join(\n                    [msg.get('text', [''])[0] if isinstance(msg.get('text', []), list) else msg.get('text', '')\n                     for msg in content_data]\n                )\n            else:\n                combined_text = content_data\n\n            sensitive_data = SensitiveData(\n                data_id=data_dict.get('data_id', f\"{source}_{Path(file_path).stem}\"),\n                content=combined_text,\n                source=source,\n                timestamp=data_dict['timestamp'],\n                data_type=data_dict['data_type'],\n                metadata=data_dict.get('metadata', {})\n            )\n        pattern_extract = edge_processor.extract_patterns(sensitive_data)\n    elif file_path.endswith('.txt'):\n        with open(file_path, 'r') as f:\n            text = f.read()\n        pattern_extract = edge_processor.extract_patterns(text, \"txt_file\")\n    else:\n        print(f\"Unsupported file type: {file_path}\")\n        sys.exit(1)\n\n    # Display results\n    print(f\"\\nExtracted {len(pattern_extract.patterns)} patterns:\")\n    for i, pattern in enumerate(pattern_extract.patterns[:5]):  # Show first 5 patterns\n        print(f\"{i+1}. Category: {pattern['category']}\")\n        print(f\"   Confidence: {pattern['confidence']:.4f}\")\n        print(f\"   Keywords: {pattern['keywords']}\")\n\n    print(f\"\\nHarmony index: {pattern_extract.harmony_index:.4f}\")\n\n    wave = edge_processor.create_wave_representation(pattern_extract)\n    print(f\"\\nWave representation:\")\n    print(f\"Pattern ID: {wave.pattern_id}\")\n    print(f\"Frequencies: {[f'{f:.2f}' for f in wave.frequencies[:3]]}...\")\n    print(f\"Amplitudes: {[f'{a:.2f}' for a in wave.amplitudes[:3]]}...\")\n    \n    # Explicitly save pattern extract and wave representation results\n    results = {\n        \"extract_id\": pattern_extract.extract_id,\n        \"source_data_id\": pattern_extract.source_data_id,\n        \"patterns\": pattern_extract.patterns,\n        \"hash_verification\": pattern_extract.hash_verification,\n        \"harmony_index\": pattern_extract.harmony_index,\n        \"wave_representation\": {\n            \"pattern_id\": wave.pattern_id,\n            \"frequencies\": wave.frequencies,\n            \"amplitudes\": wave.amplitudes,\n            \"phases\": wave.phases,\n            \"harmonics\": wave.harmonics,\n            \"duration\": wave.duration,\n            \"metadata\": wave.metadata\n        },\n        \"timestamp\": time.time()\n    }\n\n    # Ensure local storage exists\n    os.makedirs(edge_processor.local_storage_path, exist_ok=True)\n\n    # Ensure explicitly structured processed storage\n    processed_dir = Path(__file__).resolve().parent / 'transcripts' / 'processed' / source / Path(file_path).stem\n    processed_dir.mkdir(parents=True, exist_ok=True)\n\n    # Move original file explicitly into processed folder (preserving history)\n    original_transcript_dest = processed_dir / 'original_transcript.json'\n    shutil.move(file_path, original_transcript_dest)\n\n    # Move insights file explicitly into processed folder\n    extracted_insights_dest = processed_dir / 'extracted_insights.json'\n    shutil.move(results_path, extracted_insights_dest)\n\n    print(f\"\u2705 Clearly moved and structured original and insights explicitly in: {processed_dir}\")\n\n"
  ],
  "source": "chatgpt",
  "timestamp": 1743958513.634,
  "data_type": "message",
  "metadata": {
    "author": "user"
  }
}